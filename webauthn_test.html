
<!DOCTYPE html>
<html>
<head>
    <title>WebAuthn Options Test</title>
</head>
<body>
    <h1>WebAuthn Options Test</h1>
    <button onclick="testOptions()">Test Options</button>
    <div id="result"></div>
    
    <script>
    function testOptions() {
        const options = {"challenge":"K5LJyVj1vV3Mr5eY\/sEufpdIlvGbRNHPe2zTD11XJgw=","rp":{"name":"aMember","id":"www.kumpeapps.com"},"user":{"id":"MQ==","name":"justinkumpe","displayName":"Justin Kumpe"},"pubKeyCredParams":[{"alg":-7,"type":"public-key"},{"alg":-257,"type":"public-key"},{"alg":-37,"type":"public-key"},{"alg":-35,"type":"public-key"},{"alg":-36,"type":"public-key"},{"alg":-8,"type":"public-key"}],"timeout":60000,"attestation":"none","authenticatorSelection":{"authenticatorAttachment":null,"userVerification":"preferred","residentKey":"preferred","requireResidentKey":false},"extensions":{}};
        const resultDiv = document.getElementById("result");
        
        try {
            // Test challenge decoding
            const challengeBytes = Uint8Array.from(atob(options.challenge), c => c.charCodeAt(0));
            console.log("Challenge decoded length:", challengeBytes.length);
            
            // Test user ID decoding
            const userIdBytes = Uint8Array.from(atob(options.user.id), c => c.charCodeAt(0));
            console.log("User ID decoded length:", userIdBytes.length);
            
            // Test options structure
            console.log("Full options:", options);
            console.log("Authenticator selection:", options.authenticatorSelection);
            console.log("Public key params:", options.pubKeyCredParams);
            
            resultDiv.innerHTML = "<p style='color: green;'>✅ Options validation passed! Check console for details.</p>";
            
            // This would be the actual WebAuthn call
            // navigator.credentials.create({publicKey: options});
            
        } catch (error) {
            console.error("Options validation failed:", error);
            resultDiv.innerHTML = "<p style='color: red;'>❌ Options validation failed: " + error.message + "</p>";
        }
    }
    </script>
</body>
</html>